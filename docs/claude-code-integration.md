# Using ShedBoxAI with Claude Code

:::tip The Game Changer
Transform **2-4 hours of manual YAML writing** into **5-10 minutes** with Claude Code's AI-powered configuration generation.
:::

## Why This Changes Everything

### The Traditional Way âŒ
**2-4 Hours of Manual Work:**
- Study documentation to understand YAML syntax
- Figure out data source connections  
- Write complex filtering expressions
- Debug configuration errors
- Test and iterate multiple times

### The ShedBoxAI + Claude Code Way âœ…
**5-10 Minutes Total:**
1. Run introspection: `shedboxai introspect data.csv`
2. Copy results to Claude Code
3. Ask: "Create a ShedBoxAI config that analyzes customer behavior"
4. Get production-ready configuration instantly
5. Run and see results

## Live Tutorial: Customer Analysis Pipeline

### What You'll Build
By the end of this tutorial, you'll have a complete data analysis pipeline that:
- Processes customer data automatically
- Identifies high-value customer segments
- Generates AI-powered business insights
- **All created in under 10 minutes with Claude Code**

### Step 1: Download Sample Data

We've prepared realistic sample datasets for you to practice with:

**ðŸ“ Download Sample Files:**

- [ðŸ“„ customers.csv](/sample-data/customers.csv) - Customer data with spending and status
- [ðŸ“„ orders.json](/sample-data/orders.json) - Order history with categories
- ðŸ“„ sample-introspection.md - Pre-generated analysis (shown below)

:::info Quick Setup
1. Download all three files to a `tutorial-data` folder
2. Or copy the data shown below if you prefer manual setup
:::

**customers.csv** preview:
```csv
customer_id,name,email,total_spent,last_purchase_date,status
1001,Sarah Johnson,sarah.j@email.com,2450.00,2024-06-15,active
1002,Mike Chen,mike.chen@email.com,890.50,2024-05-22,active
1003,Emily Rodriguez,emily.r@email.com,5620.00,2024-07-01,premium
# ... 7 more realistic customer records
```

**orders.json** preview:
```json
[
  {
    "order_id": "ORD-2024-001",
    "customer_id": 1001,
    "amount": 150.00,
    "date": "2024-06-15",
    "category": "electronics",
    "product": "Wireless Headphones"
  }
  // ... 7 more order records
]
```

### Step 2: Run Data Introspection

ShedBoxAI's introspection feature automatically analyzes your data and detects schemas, relationships, and patterns.

```bash
# Navigate to your data folder
cd tutorial-data

# Run introspection on your data sources
shedboxai introspect customers.csv orders.json
```

**Expected Output:**
```markdown
# Data Source Analysis Report

## Source: customers.csv
- **Type**: CSV
- **Records**: 5 rows
- **Schema**:
  - customer_id: integer (unique identifier)
  - name: string (full names)
  - email: string (email addresses)
  - total_spent: decimal (monetary values, range: $340.25 - $5,620.00)
  - last_purchase_date: date (2024-03-10 to 2024-07-01)
  - status: categorical (active, premium, inactive)

## Source: orders.json
- **Type**: JSON Array
- **Records**: 2 rows  
- **Schema**:
  - order_id: string (format: ORD-YYYY-NNN)
  - customer_id: integer (foreign key to customers)
  - amount: decimal (monetary values)
  - date: date
  - category: categorical (electronics, fashion)

## Detected Relationships
- **customers.customer_id** â†” **orders.customer_id** (one-to-many)

## Recommended Operations
- Contextual filtering on customer status or spending thresholds
- Relationship highlighting to join customer and order data
- Format conversion for customer segmentation
- AI analysis for customer behavior insights
```

### Step 3: Generate Configuration with Claude Code

Now comes the magic! Copy the introspection results and paste them into Claude Code with this prompt:

```
Using this ShedBoxAI data introspection, create a configuration that:

1. Identifies high-value customers (>$1000 total spent)
2. Joins customer data with their order history  
3. Segments customers into VIP, Premium, and Standard tiers
4. Generates AI-powered insights about customer behavior patterns
5. Includes both learning mode (store_only: true) and production mode options

[Paste your introspection results here]
```

**Claude Code will generate a complete configuration like this:**

```yaml
# Generated by Claude Code - Customer Analysis Pipeline
# Time saved: 3+ hours of manual configuration

data_sources:
  customers:
    type: csv
    path: customers.csv
    options:
      encoding: utf-8
      delimiter: ","
      
  orders:
    type: json
    path: orders.json

processing:
  # Filter for active high-value customers
  contextual_filtering:
    high_value_customers:
      source: customers
      conditions:
        - field: total_spent
          condition: "total_spent > 1000"
        - field: status
          condition: "status != 'inactive'"
  
  # Join customer and order data
  relationships:
    customer_order_analysis:
      primary_source: high_value_customers
      related_source: orders
      join_key: customer_id
      relationship_type: "one_to_many"
  
  # Create customer segments
  format_conversion:
    customer_segments:
      source: customer_order_analysis
      operations:
        - type: calculated_field
          field: tier
          expression: "total_spent > 5000 ? 'VIP' : (total_spent > 2000 ? 'Premium' : 'Standard')"
        - type: field_extraction
          fields: [customer_id, name, email, total_spent, tier, last_purchase_date]

# AI Analysis Configuration
ai_interface:
  # Learning Mode - Generate prompts without API costs
  prompt_storage:
    enabled: true
    directory: "generated_prompts"
    store_only: true  # Set to false for production mode
    file_format: "customer_analysis_{timestamp}.md"
    include_metadata: true
  
  prompts:
    customer_insights:
      system: |
        You are a customer behavior analyst with expertise in e-commerce analytics.
        Analyze customer data and provide actionable business insights.
        Focus on retention strategies, upselling opportunities, and risk factors.
      
      user_template: |
        # Customer Analysis Data
        {{customer_segments}}
        
        Please analyze these customer segments and provide:
        1. Key behavior patterns for each tier (VIP, Premium, Standard)
        2. Retention strategies for high-value customers
        3. Upselling opportunities for Standard tier customers
        4. Risk factors and early warning signs for customer churn
        5. Recommended marketing campaigns for each segment
        
        Format your response as actionable business recommendations.
      
      temperature: 0.7
      max_tokens: 1500

# Output configuration  
output:
  type: file
  path: customer_analysis_results.json
  format: json
```

### Step 4: Learning Mode vs Production Mode

ShedBoxAI's unique `store_only` feature lets you learn prompt engineering without spending money on API calls.

#### Learning Mode (`store_only: true`)
Perfect for understanding and education:

```yaml
ai_interface:
  prompt_storage:
    store_only: true  # Only generate prompts, don't call APIs
```

**Result**: Beautiful, complete prompts saved to files that you can:
- Use manually in ChatGPT or Claude
- Study to learn prompt engineering  
- Modify and improve
- Share with your team

#### Production Mode (`store_only: false`)  
For automated execution:

```yaml
ai_interface:
  model:
    type: rest
    url: https://api.openai.com/v1/chat/completions
    headers:
      Authorization: Bearer ${OPENAI_API_KEY}
      Content-Type: application/json
    options:
      model: gpt-4
      temperature: 0.7
  
  prompt_storage:
    store_only: false  # Store AND execute prompts
```

**Result**: Full automation with AI responses and prompt storage.

### Step 5: Run Your Configuration

```bash
# Save the generated config as customer-analysis.yaml
# Then run it:

shedboxai run customer-analysis.yaml
```

**Expected Results:**

**Learning Mode Output:**
- Prompt files saved to `generated_prompts/`
- Complete prompts ready for manual use
- No API costs incurred

**Production Mode Output:**
- `customer_analysis_results.json` with AI insights
- Prompt files for reference
- Complete customer segment analysis

## Before vs After Comparison

### Manual Configuration (The Old Way)
```yaml
# 60+ lines of complex YAML
# Requires deep ShedBoxAI knowledge
# 2-4 hours of development time
# Multiple iterations to get right

data_sources:
  customers:
    type: csv
    path: customers.csv
    options:
      encoding: utf-8
      delimiter: ","
      header: true
      schema_detection: true
      null_values: ["", "NULL", "null"]
      
  orders:
    type: json
    path: orders.json
    options:
      array_path: "$"
      schema_validation: true

processing:
  contextual_filtering:
    active_customers:
      source: customers
      conditions:
        - field: status
          condition: "status == 'active' || status == 'premium'"
          
    high_value_customers:
      source: active_customers  
      conditions:
        - field: total_spent
          condition: "total_spent > 1000.0"
          
  relationships:
    customer_orders:
      primary_source: high_value_customers
      related_source: orders
      join_configuration:
        type: "left_join"
        primary_key: "customer_id"
        foreign_key: "customer_id"
        relationship_type: "one_to_many"
        
  format_conversion:
    customer_segments:
      source: customer_orders
      operations:
        - type: "calculated_field"
          field: "customer_tier"
          expression: "total_spent > 5000 ? 'VIP' : (total_spent > 2000 ? 'Premium' : 'Standard')"
        - type: "field_mapping"
          mappings:
            customer_id: "id"
            customer_name: "name"  
            customer_email: "email"
        - type: "aggregation"
          group_by: ["customer_tier"]
          functions:
            - field: "total_spent"
              operation: "avg"
              alias: "avg_spending_by_tier"

# ... 30+ more lines of AI configuration, error handling, etc.
```

### Claude Code Generated (The New Way)
```yaml
# 30 lines of clean, working YAML
# Generated in 2 minutes
# Professional-grade configuration
# Includes learning and production modes

data_sources:
  customers: { type: csv, path: customers.csv }
  orders: { type: json, path: orders.json }

processing:
  contextual_filtering:
    high_value_customers:
      source: customers
      conditions:
        - field: total_spent
          condition: "total_spent > 1000"
        - field: status
          condition: "status != 'inactive'"
  
  relationships:
    customer_analysis:
      primary_source: high_value_customers
      related_source: orders
      join_key: customer_id
  
  format_conversion:
    segments:
      source: customer_analysis
      operations:
        - type: calculated_field
          field: tier
          expression: "total_spent > 5000 ? 'VIP' : 'Premium'"

ai_interface:
  prompt_storage:
    enabled: true
    store_only: true  # Learning mode
  prompts:
    insights:
      system: "You are a customer behavior analyst..."
      user_template: "Analyze: {{segments}}"

output:
  type: file
  path: results.json
```

**Time Saved: 3+ hours â†’ 5 minutes**
**Complexity Reduced: 90+ lines â†’ 30 lines**
**Errors Avoided: Manual debugging â†’ AI-generated perfection**

## Advanced Examples

### Fan-Out Processing
Generate individual customer reports:

**Claude Code Prompt:**
```
Create a ShedBoxAI config that generates personalized analysis reports for each customer individually using fan-out processing.
```

**Generated Feature:**
```yaml
ai_interface:
  prompts:
    individual_analysis:
      user_template: "Customer: {{name}}, Tier: {{tier}}, Spending: ${{total_spent}}"
      for_each: customers  # Process each customer individually
      parallel: true      # Process in parallel for speed
```

### Multi-Source Integration
**Claude Code Prompt:**
```
Add product catalog data and create cross-sell recommendations.
```

**Generated Enhancement:**
```yaml
data_sources:
  customers: { type: csv, path: customers.csv }
  orders: { type: json, path: orders.json }
  products: { type: csv, path: products.csv }

processing:
  relationships:
    customer_product_affinity:
      sources: [customers, orders, products]
      analysis_type: "purchase_patterns"
```

## Troubleshooting

### Common Issues

**Q: Introspection command not found**
```bash
# Make sure ShedBoxAI is installed
pip install shedboxai

# Verify installation
shedboxai --version
```

**Q: Claude Code generates config but it doesn't run**
- Ensure file paths are correct relative to your working directory
- Check that sample data files are in the expected location
- Verify YAML syntax is valid

**Q: Want to use different AI models?**
```yaml
ai_interface:
  model:
    type: rest
    url: https://api.anthropic.com/v1/messages  # Claude API
    # or
    url: https://api.openai.com/v1/chat/completions  # OpenAI API
```

### Best Practices

1. **Start with Learning Mode**: Use `store_only: true` to understand prompts
2. **Iterate Prompts**: Copy generated prompts to Claude Code for refinement  
3. **Test with Sample Data**: Always validate with small datasets first
4. **Graduate to Production**: Switch to `store_only: false` when ready

## Next Steps

### Continue Learning
- **[Getting Started Guide](/docs/getting-started/installation)** - Complete installation and setup
- **[Advanced Operations](/docs/operations/advanced-operations)** - Complex data processing
- **[API Integration](/docs/configuration/data-sources)** - Connect to real APIs

### Build Something Amazing
Now that you've seen how easy it is, try building:
- **Marketing Campaign Generator** - Personalized email campaigns
- **Sales Lead Scoring** - AI-powered lead qualification  
- **Inventory Optimization** - Demand forecasting and stock management
- **Customer Support Automation** - Intelligent ticket routing

### Join the Community
- **GitHub Discussions** - Share your configurations
- **Example Marketplace** - Submit your best configs
- **Discord Community** - Get help and help others

---

:::tip Pro Tip
The `store_only` feature is perfect for learning prompt engineering without API costs. Master your prompts in learning mode, then switch to production for full automation!
:::

**Ready to transform your data processing workflows?** With Claude Code + ShedBoxAI, complex data analysis becomes as simple as asking an AI assistant. **No YAML expertise required.**