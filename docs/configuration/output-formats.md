# Output Formats

Configure how ShedBoxAI saves and presents your processed data. Support for multiple formats, destinations, and advanced formatting options.

## Overview

ShedBoxAI supports flexible output configuration:
- **File Output**: JSON, YAML formats
- **Console Output**: Pretty-printed results
- **Auto-creation**: Output directories created automatically

## Basic Output Configuration

### File Output

Save results to files:

```yaml
output:
  type: file
  path: output/results.json
  format: json
```

### Console Output

Print results to console:

```yaml
output:
  type: print
```

## Output Formats

### JSON Format

Structured JSON output with formatting options:

```yaml
output:
  type: file
  path: output/data.json
  format: json
  options:
    indent: 2           # Pretty formatting
    ensure_ascii: false # Allow Unicode characters
    sort_keys: true     # Sort object keys
```

**Example Output:**
```json
{
  "filtered_customers": [
    {
      "name": "John Smith",
      "age": 34,
      "segment": "Premium"
    }
  ],
  "summary_stats": {
    "total_customers": 150,
    "avg_age": 32.5
  }
}
```

### YAML Format

Human-readable YAML output:

```yaml
output:
  type: file
  path: output/data.yaml
  format: yaml
```

**Example Output:**
```yaml
filtered_customers:
  - name: John Smith
    age: 34
    segment: Premium
summary_stats:
  total_customers: 150
  avg_age: 32.5
```

## Supported Output Types

ShedBoxAI supports two output types:

### File Output
- **JSON**: Structured data output
- **YAML**: Human-readable format

### Console Output
- **Print**: Direct console output

**Note**: Only JSON and YAML file formats are currently supported.
    format: json
  
  - type: file
    path: output/summary.txt
    format: text
    template: |
      Summary Report
      Total Records: {{count(data)}}
      Generated: {{now()}}
  
  - type: print
```

### Conditional Output

Output based on conditions:

```yaml
output:
  type: file
  path: output/results_{{segment}}.json
  format: json
  condition: "count(data) > 0"  # Only output if data exists
```

### Dynamic Paths

Use expressions in output paths:

```yaml
output:
  type: file
  path: "output/{{now()|date('%Y-%m-%d')}}/results.json"
  format: json
```

## Template-Based Output

### Custom Text Templates

Create formatted reports:

```yaml
output:
  type: file
  path: output/report.md
  format: text
  template: |
    # Data Analysis Report
    
    **Generated:** {{now()|date('%B %d, %Y at %I:%M %p')}}
    
    ## Summary Statistics
    - Total Records: {{count(all_data)}}
    - Processed Records: {{count(processed_data)}}
    - Success Rate: {{(count(processed_data) / count(all_data) * 100)|round(1)}}%
    
    ## Key Findings
    {% for finding in key_findings %}
    ### {{finding.title}}
    {{finding.description}}
    
    **Impact:** {{finding.impact}}
    {% endfor %}
    
    ## Top Performers
    | Rank | Name | Value | Change |
    |------|------|-------|--------|
    {% for item in top_performers[:10] %}
    | {{loop.index}} | {{item.name}} | ${{item.value|currency}} | {{item.change|percentage}} |
    {% endfor %}
    
    ## Recommendations
    {% for rec in recommendations %}
    {{loop.index}}. **{{rec.title}}**: {{rec.description}}
    {% endfor %}
    
    ---
    *Report generated by ShedBoxAI*
```

### HTML Output

Generate HTML reports:

```yaml
output:
  type: file
  path: output/dashboard.html
  format: text
  template: |
    <!DOCTYPE html>
    <html>
    <head>
        <title>Analytics Dashboard</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            .metric { background: #f5f5f5; padding: 20px; margin: 10px 0; border-radius: 5px; }
            table { border-collapse: collapse; width: 100%; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; }
        </style>
    </head>
    <body>
        <h1>Analytics Dashboard</h1>
        <p>Generated: {{now()|date('%B %d, %Y')}}</p>
        
        <div class="metric">
            <h3>Key Metrics</h3>
            <p><strong>Total Revenue:</strong> ${{total_revenue|currency}}</p>
            <p><strong>Growth Rate:</strong> {{growth_rate|percentage}}</p>
            <p><strong>Active Users:</strong> {{active_users|number}}</p>
        </div>
        
        <h3>Top Products</h3>
        <table>
            <tr><th>Product</th><th>Sales</th><th>Revenue</th></tr>
            {% for product in top_products %}
            <tr>
                <td>{{product.name}}</td>
                <td>{{product.sales|number}}</td>
                <td>${{product.revenue|currency}}</td>
            </tr>
            {% endfor %}
        </table>
    </body>
    </html>
```

## Data Structure Options

### Flat Structure

Output all data at the root level:

```yaml
output:
  type: file
  path: output/flat.json
  format: json
  structure: flat
```

**Result:**
```json
{
  "user_1_name": "John",
  "user_1_age": 30,
  "user_2_name": "Jane", 
  "user_2_age": 25
}
```

### Nested Structure

Maintain hierarchical data structure:

```yaml
output:
  type: file
  path: output/nested.json
  format: json
  structure: nested  # Default
```

**Result:**
```json
{
  "users": [
    {"name": "John", "age": 30},
    {"name": "Jane", "age": 25}
  ],
  "metadata": {
    "total": 2,
    "generated": "2024-01-15T10:30:00Z"
  }
}
```

### Custom Structure

Define custom output structure:

```yaml
output:
  type: file
  path: output/custom.json
  format: json
  structure:
    summary:
      total_records: "{{count(data)}}"
      processing_time: "{{processing_time}}"
    results: "{{data}}"
    metadata:
      generated_at: "{{now()}}"
      version: "1.0"
```

## Filter and Transform Output

### Data Filtering

Include only specific data in output:

```yaml
output:
  type: file
  path: output/filtered.json
  format: json
  include_only: ["customers", "summary_stats"]  # Only these keys
  exclude: ["debug_info", "temp_data"]         # Exclude these keys
```

### Data Transformation

Transform data before output:

```yaml
output:
  type: file
  path: output/transformed.json
  format: json
  transform:
    # Rename keys
    rename:
      old_key: new_key
      customer_data: customers
    
    # Add computed fields
    computed:
      total_value: "{{sum(map(customers, 'lifetime_value'))}}"
      report_date: "{{now()|date}}"
    
    # Format values
    format:
      prices: currency
      percentages: percentage
      dates: "date('%Y-%m-%d')"
```

## Compression and Archiving

### Compressed Output

Compress large output files:

```yaml
output:
  type: file
  path: output/data.json.gz
  format: json
  compression: gzip
  options:
    compression_level: 6  # 1-9, higher = better compression
```

### Archive Output

Create timestamped archives:

```yaml
output:
  type: file
  path: "archives/data_{{now()|date('%Y%m%d_%H%M%S')}}.json"
  format: json
  archive: true
  retention_days: 30  # Auto-cleanup old files
```

## Console Output Options

### Pretty Printing

Enhanced console output:

```yaml
output:
  type: print
  format: pretty
  options:
    colors: true         # Syntax highlighting
    indent: 2           # Indentation
    max_depth: 3        # Limit nesting depth
    truncate_long: 100  # Truncate long strings
```

### Table Format

Display tabular data:

```yaml
output:
  type: print
  format: table
  options:
    headers: true       # Show column headers
    borders: true       # Table borders
    max_width: 120     # Maximum table width
    align: left        # Column alignment
```

### Summary Format

Show key metrics only:

```yaml
output:
  type: print
  format: summary
  template: |
    ðŸ“Š Processing Results:
    â€¢ Records processed: {{count(data)}}
    â€¢ Success rate: {{success_rate|percentage}}
    â€¢ Total time: {{processing_time}}s
    â€¢ Top result: {{top_result.name}}
```

## Error Handling

### Output Validation

Validate output before saving:

```yaml
output:
  type: file
  path: output/data.json
  format: json
  validation:
    required_fields: ["customers", "summary"]
    min_records: 1
    max_file_size: "10MB"
    schema_file: "schemas/output.json"
```

### Fallback Output

Handle output failures:

```yaml
output:
  - type: file
    path: output/data.json
    format: json
    on_error: continue  # Try next output on failure
  
  - type: file
    path: output/backup.txt
    format: text
    template: "Backup output: {{data}}"
```

## Best Practices

### File Organization
```yaml
# Organize outputs by date and type
output:
  type: file
  path: "output/{{now()|date('%Y/%m/%d')}}/{{pipeline_name}}_results.json"
  format: json
```

### Performance
```yaml
# Use appropriate formats for data size
output:
  type: file
  path: output/data.json.gz  # Compress large files
  format: json
  compression: gzip
```

### Monitoring
```yaml
# Include metadata for debugging
output:
  type: file
  path: output/results.json
  format: json
  include_metadata: true
  metadata:
    pipeline_version: "{{version}}"
    execution_time: "{{execution_time}}"
    record_count: "{{count(data)}}"
```

## Examples

### Multi-Format Dashboard
```yaml
output:
  # JSON for programmatic access
  - type: file
    path: output/data.json
    format: json
  
  # CSV for spreadsheet analysis
  - type: file
    path: output/customers.csv
    format: csv
    data: "{{customers}}"
  
  # HTML dashboard
  - type: file
    path: output/dashboard.html
    format: text
    template_file: templates/dashboard.html
  
  # Console summary
  - type: print
    format: summary
    template: |
      âœ… Pipeline completed successfully!
      ðŸ“Š {{count(customers)}} customers processed
      ðŸ’° Total revenue: ${{total_revenue|currency}}
```

## Next Steps

- [Operations](../operations/) - Process data before output
- [Template Matching](../operations/templates.md) - Advanced output templating
- [CLI Reference](../cli-reference/) - Command-line output options
- [Examples](../examples/) - Real-world output configurations